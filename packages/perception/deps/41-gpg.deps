#!/bin/bash

set -e

TARGET_DIR=$1
if [ ! -d "${TARGET_DIR}" ]; then
  mkdir -p "${TARGET_DIR}"
  echo "No such directory, create \"${TARGET_DIR}\""
fi

cd $TARGET_DIR
echo "build gpg"

if [[ ! -d gpg ]]
then
    git clone --depth 1 https://github.com/atenpas/gpg.git
fi

# install libpcl
sudo apt-get install -qq -y libpcl-dev

cd gpg
rm -rf build &&mkdir -p build && cd build
cmake .. && make && sudo make install
